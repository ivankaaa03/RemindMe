<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RemindMe - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        opacity: 0.9;
      }

      .content {
        padding: 30px;
      }

      .auth-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 30px;
      }

      .auth-section.authorized {
        background: #d4edda;
        border: 2px solid #28a745;
      }

      .auth-section h2 {
        margin-bottom: 15px;
        color: #333;
      }

      .form-group {
        margin-bottom: 15px;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
        color: #555;
      }

      .form-group input,
      .form-group select {
        width: 100%;
        padding: 10px;
        border: 2px solid #ddd;
        border-radius: 5px;
        font-size: 16px;
      }

      .form-group input:focus,
      .form-group select:focus {
        outline: none;
        border-color: #667eea;
      }

      .btn {
        padding: 12px 30px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-primary {
        background: #667eea;
        color: white;
      }

      .btn-primary:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      .btn-success {
        background: #28a745;
        color: white;
      }

      .btn-success:hover {
        background: #218838;
      }

      .btn-danger {
        background: #dc3545;
        color: white;
      }

      .btn-danger:hover {
        background: #c82333;
      }

      .section {
        margin-bottom: 30px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 10px;
      }

      .section h2 {
        margin-bottom: 20px;
        color: #333;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
      }

      .books-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .book-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s;
      }

      .book-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      }

      .book-card h3 {
        color: #667eea;
        margin-bottom: 10px;
      }

      .book-card p {
        margin: 5px 0;
        color: #666;
      }

      .book-type {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 12px;
        font-weight: 600;
        margin-top: 10px;
      }

      .book-type.audiobook {
        background: #ffeaa7;
        color: #d63031;
      }

      .book-type.scanned {
        background: #74b9ff;
        color: #0984e3;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 10px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 12px;
        font-weight: 600;
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .stat-card {
        background: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .stat-card h3 {
        font-size: 2em;
        color: #667eea;
        margin-bottom: 5px;
      }

      .stat-card p {
        color: #666;
      }

      .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .user-icon {
        width: 40px;
        height: 40px;
        background: #667eea;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 18px;
      }

      .pattern-badge {
        display: inline-block;
        padding: 3px 8px;
        background: #e9ecef;
        border-radius: 5px;
        font-size: 11px;
        font-weight: 600;
        color: #495057;
        margin-left: 10px;
      }

      .log {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        max-height: 300px;
        overflow-y: auto;
        font-family: "Courier New", monospace;
        font-size: 14px;
        margin-top: 20px;
      }

      .log-entry {
        margin: 5px 0;
        padding: 5px;
        border-left: 3px solid #667eea;
        padding-left: 10px;
      }

      .disabled {
        opacity: 0.5;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üìö RemindMe</h1>
        <p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏ –∑ –ø–æ—Ä–æ–¥–∂—É–≤–∞–ª—å–Ω–∏–º–∏ –ø–∞—Ç–µ—Ä–Ω–∞–º–∏</p>
      </div>

      <div class="content">
        <!-- –°–µ–∫—Ü—ñ—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (Singleton) -->
        <div class="auth-section" id="authSection">
          <h2>üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è <span class="pattern-badge">Singleton</span></h2>
          <div id="loginForm">
            <div class="form-group">
              <label>–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:</label>
              <input
                type="text"
                id="username"
                placeholder="–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è"
                value="user123"
              />
            </div>
            <div class="form-group">
              <label>–ü–∞—Ä–æ–ª—å:</label>
              <input
                type="password"
                id="password"
                placeholder="–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å"
                value="password123"
              />
            </div>
            <button class="btn btn-primary" onclick="login()">–£–≤—ñ–π—Ç–∏</button>
          </div>
          <div id="userInfo" style="display: none">
            <div class="user-info">
              <div class="user-icon" id="userIcon"></div>
              <div>
                <strong id="currentUser"></strong>
                <p style="margin: 0; font-size: 14px; color: #666">
                  –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ
                </p>
              </div>
              <button
                class="btn btn-danger"
                onclick="logout()"
                style="margin-left: auto"
              >
                –í–∏–π—Ç–∏
              </button>
            </div>
          </div>
        </div>

        <!-- –°–µ–∫—Ü—ñ—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–Ω–∏–≥ (Factory Method + Builder) -->
        <div class="section disabled" id="addBookSection">
          <h2>
            ‚ûï –î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É <span class="pattern-badge">Factory Method</span>
            <span class="pattern-badge">Builder</span>
          </h2>
          <div class="form-group">
            <label>–¢–∏–ø –∫–Ω–∏–≥–∏:</label>
            <select id="bookType">
              <option value="audiobook">–ê—É–¥—ñ–æ–∫–Ω–∏–≥–∞</option>
              <option value="scanned">–°–∫–∞–Ω–æ–≤–∞–Ω–∞ –∫–Ω–∏–≥–∞</option>
            </select>
          </div>
          <div class="form-group">
            <label>–ù–∞–∑–≤–∞:</label>
            <input
              type="text"
              id="bookTitle"
              placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –∫–Ω–∏–≥–∏"
            />
          </div>
          <div class="form-group">
            <label>–ê–≤—Ç–æ—Ä:</label>
            <input type="text" id="bookAuthor" placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–≤—Ç–æ—Ä–∞" />
          </div>
          <div class="form-group">
            <label>–í–∏–¥–∞–≤–Ω–∏—Ü—Ç–≤–æ:</label>
            <input
              type="text"
              id="bookPublisher"
              placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∏–¥–∞–≤–Ω–∏—Ü—Ç–≤–æ"
            />
          </div>
          <button class="btn btn-success" onclick="addBook()">
            –î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É
          </button>
        </div>

        <!-- –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –∫–Ω–∏–≥ (Database Singleton) -->
        <div class="section disabled" id="librarySection">
          <h2>
            üìñ –ú–æ—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞
            <span class="pattern-badge">Singleton Database</span>
          </h2>
          <div class="books-grid" id="booksGrid">
            <p style="text-align: center; color: #999">
              –ö–Ω–∏–≥ —â–µ –Ω–µ–º–∞—î. –î–æ–¥–∞–π—Ç–µ –ø–µ—Ä—à—É!
            </p>
          </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (ProgressService Singleton) -->
        <div class="section disabled" id="statsSection">
          <h2>
            üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            <span class="pattern-badge">Singleton ProgressService</span>
          </h2>
          <div class="stats">
            <div class="stat-card">
              <h3 id="totalBooks">0</h3>
              <p>–í—Å—å–æ–≥–æ –∫–Ω–∏–≥</p>
            </div>
            <div class="stat-card">
              <h3 id="avgProgress">0%</h3>
              <p>–°–µ—Ä–µ–¥–Ω—ñ–π –ø—Ä–æ–≥—Ä–µ—Å</p>
            </div>
            <div class="stat-card">
              <h3 id="audiobookCount">0</h3>
              <p>–ê—É–¥—ñ–æ–∫–Ω–∏–≥</p>
            </div>
            <div class="stat-card">
              <h3 id="scannedCount">0</h3>
              <p>–°–∫–∞–Ω–æ–≤–∞–Ω–∏—Ö –∫–Ω–∏–≥</p>
            </div>
          </div>
        </div>

        <!-- –õ–æ–≥ –ø–æ–¥—ñ–π -->
        <div class="section">
          <h2>üìù –õ–æ–≥ –ø–æ–¥—ñ–π —Å–∏—Å—Ç–µ–º–∏</h2>
          <div class="log" id="logContainer"></div>
        </div>
      </div>
    </div>

    <script>
      // ============= –ü–∞—Ç–µ—Ä–Ω Singleton: Authorization =============
      class Authorization {
        constructor() {
          if (Authorization.instance) {
            return Authorization.instance;
          }
          Authorization.instance = this;
          this.currentUser = null;
          this.isAuthorized = false;
          this.log("üîê –°–µ—Ä–≤—ñ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ");
        }

        static getInstance() {
          if (!Authorization.instance) {
            Authorization.instance = new Authorization();
          }
          return Authorization.instance;
        }

        login(username, password) {
          if (password === "password123") {
            this.currentUser = username;
            this.isAuthorized = true;
            this.log(`‚úì –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ${username} –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π`);
            return true;
          }
          this.log("‚úó –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó");
          return false;
        }

        logout() {
          const user = this.currentUser;
          this.currentUser = null;
          this.isAuthorized = false;
          this.log(`‚úì –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ${user} –≤–∏–π—à–æ–≤ –∑ —Å–∏—Å—Ç–µ–º–∏`);
        }

        checkAuthorization() {
          return this.isAuthorized;
        }

        getCurrentUser() {
          return this.currentUser;
        }

        log(message) {
          const logContainer = document.getElementById("logContainer");
          const entry = document.createElement("div");
          entry.className = "log-entry";
          entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
          logContainer.appendChild(entry);
          logContainer.scrollTop = logContainer.scrollHeight;
        }
      }

      // ============= –ü–∞—Ç–µ—Ä–Ω Singleton: Database =============
      class Database {
        constructor() {
          if (Database.instance) {
            return Database.instance;
          }
          Database.instance = this;
          this.books = new Map();
          this.auth = Authorization.getInstance();
          this.auth.log("üìö –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞");
        }

        static getInstance() {
          if (!Database.instance) {
            Database.instance = new Database();
          }
          return Database.instance;
        }

        addBook(book) {
          this.books.set(book.id, book);
          this.auth.log(`‚úì –ö–Ω–∏–≥–∞ –¥–æ–¥–∞–Ω–∞ –¥–æ –ë–î: ${book.title}`);
        }

        getBook(id) {
          return this.books.get(id);
        }

        getAllBooks() {
          return Array.from(this.books.values());
        }

        getBookCount() {
          return this.books.size;
        }
      }

      // ============= –ü–∞—Ç–µ—Ä–Ω Singleton: ProgressService =============
      class ProgressService {
        constructor() {
          if (ProgressService.instance) {
            return ProgressService.instance;
          }
          ProgressService.instance = this;
          this.progress = new Map();
          this.auth = Authorization.getInstance();
          this.auth.log("üìä –°–µ—Ä–≤—ñ—Å –ø—Ä–æ–≥—Ä–µ—Å—É —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ");
        }

        static getInstance() {
          if (!ProgressService.instance) {
            ProgressService.instance = new ProgressService();
          }
          return ProgressService.instance;
        }

        updateProgress(bookId, value) {
          this.progress.set(bookId, value);
          this.auth.log(`üìñ –ü—Ä–æ–≥—Ä–µ—Å –æ–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∫–Ω–∏–≥–∏ ${bookId}: ${value}%`);
        }

        getProgress(bookId) {
          return this.progress.get(bookId) || 0;
        }

        getAverageProgress() {
          if (this.progress.size === 0) return 0;
          const sum = Array.from(this.progress.values()).reduce(
            (a, b) => a + b,
            0
          );
          return Math.round(sum / this.progress.size);
        }
      }

      // ============= –ü–∞—Ç–µ—Ä–Ω Builder: Book =============
      class Book {
        constructor() {
          this.id = "";
          this.title = "";
          this.author = "";
          this.publisher = "";
          this.isbn = "";
          this.year = 0;
          this.description = "";
          this.type = "";
        }
      }

      class BookBuilder {
        constructor() {
          this.book = new Book();
        }

        setId(id) {
          this.book.id = id;
          return this;
        }

        setTitle(title) {
          this.book.title = title;
          return this;
        }

        setAuthor(author) {
          this.book.author = author;
          return this;
        }

        setPublisher(publisher) {
          this.book.publisher = publisher;
          return this;
        }

        setIsbn(isbn) {
          this.book.isbn = isbn;
          return this;
        }

        setYear(year) {
          this.book.year = year;
          return this;
        }

        setDescription(desc) {
          this.book.description = desc;
          return this;
        }

        setType(type) {
          this.book.type = type;
          return this;
        }

        build() {
          return this.book;
        }
      }

      class AudiobookBuilder extends BookBuilder {
        constructor() {
          super();
          this.narrator = "";
          this.duration = 0;
        }

        setNarrator(narrator) {
          this.narrator = narrator;
          return this;
        }

        setDuration(minutes) {
          this.duration = minutes;
          return this;
        }

        build() {
          this.book.description += ` [–ê—É–¥—ñ–æ–∫–Ω–∏–≥–∞, –¥–∏–∫—Ç–æ—Ä: ${this.narrator}, —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: ${this.duration} —Ö–≤]`;
          this.book.type = "audiobook";
          return this.book;
        }
      }

      class ScannedBookBuilder extends BookBuilder {
        constructor() {
          super();
          this.pageCount = 0;
          this.ocrQuality = "";
        }

        setPageCount(pages) {
          this.pageCount = pages;
          return this;
        }

        setOcrQuality(quality) {
          this.ocrQuality = quality;
          return this;
        }

        build() {
          this.book.description += ` [–°–∫–∞–Ω–æ–≤–∞–Ω–∞ –∫–Ω–∏–≥–∞, —Å—Ç–æ—Ä—ñ–Ω–æ–∫: ${this.pageCount}, —è–∫—ñ—Å—Ç—å OCR: ${this.ocrQuality}]`;
          this.book.type = "scanned";
          return this.book;
        }
      }

      // ============= –ü–∞—Ç–µ—Ä–Ω Factory Method =============
      class BookCreator {
        createBook(id, title, author, publisher) {
          throw new Error("–ú–µ—Ç–æ–¥ –º–∞—î –±—É—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π");
        }
      }

      class AudiobookCreator extends BookCreator {
        createBook(id, title, author, publisher) {
          const builder = new AudiobookBuilder();
          return builder
            .setId(id)
            .setTitle(title)
            .setAuthor(author)
            .setPublisher(publisher)
            .setDescription("–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ –æ–∑–≤—É—á–µ–Ω–∞ –∞—É–¥—ñ–æ–∫–Ω–∏–≥–∞")
            .setNarrator("–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –¥–∏–∫—Ç–æ—Ä")
            .setDuration(180)
            .setYear(new Date().getFullYear())
            .build();
        }
      }

      class ScannedBookCreator extends BookCreator {
        createBook(id, title, author, publisher) {
          const builder = new ScannedBookBuilder();
          return builder
            .setId(id)
            .setTitle(title)
            .setAuthor(author)
            .setPublisher(publisher)
            .setDescription("–¶–∏—Ñ—Ä–æ–≤–∞ –∫–æ–ø—ñ—è –¥—Ä—É–∫–æ–≤–∞–Ω–æ–≥–æ –≤–∏–¥–∞–Ω–Ω—è")
            .setPageCount(250)
            .setOcrQuality("–≤–∏—Å–æ–∫–∞")
            .setYear(new Date().getFullYear())
            .build();
        }
      }

      // ============= BookService =============
      class BookService {
        constructor() {
          this.db = Database.getInstance();
          this.progress = ProgressService.getInstance();
          this.auth = Authorization.getInstance();
        }

        addBook(type, title, author, publisher) {
          if (!this.auth.checkAuthorization()) {
            alert("–ü–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è!");
            return null;
          }

          const id = "BOOK_" + Date.now();
          let creator;

          if (type === "audiobook") {
            creator = new AudiobookCreator();
          } else if (type === "scanned") {
            creator = new ScannedBookCreator();
          }

          const book = creator.createBook(id, title, author, publisher);
          this.db.addBook(book);
          this.progress.updateProgress(id, Math.floor(Math.random() * 100));

          return book;
        }
      }

      // ============= UI Functions =============
      const auth = Authorization.getInstance();
      const bookService = new BookService();

      function login() {
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;

        if (auth.login(username, password)) {
          document.getElementById("loginForm").style.display = "none";
          document.getElementById("userInfo").style.display = "block";
          document.getElementById("currentUser").textContent = username;
          document.getElementById("userIcon").textContent = username
            .charAt(0)
            .toUpperCase();
          document.getElementById("authSection").classList.add("authorized");

          document
            .getElementById("addBookSection")
            .classList.remove("disabled");
          document
            .getElementById("librarySection")
            .classList.remove("disabled");
          document.getElementById("statsSection").classList.remove("disabled");
        } else {
          alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å! –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ: password123");
        }
      }

      function logout() {
        auth.logout();
        document.getElementById("loginForm").style.display = "block";
        document.getElementById("userInfo").style.display = "none";
        document.getElementById("authSection").classList.remove("authorized");

        document.getElementById("addBookSection").classList.add("disabled");
        document.getElementById("librarySection").classList.add("disabled");
        document.getElementById("statsSection").classList.add("disabled");
      }

      function addBook() {
        const type = document.getElementById("bookType").value;
        const title = document.getElementById("bookTitle").value;
        const author = document.getElementById("bookAuthor").value;
        const publisher = document.getElementById("bookPublisher").value;

        if (!title || !author) {
          alert("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–∞ –∞–≤—Ç–æ—Ä–∞!");
          return;
        }

        bookService.addBook(type, title, author, publisher || "–ù–µ–≤—ñ–¥–æ–º–æ");

        document.getElementById("bookTitle").value = "";
        document.getElementById("bookAuthor").value = "";
        document.getElementById("bookPublisher").value = "";

        renderLibrary();
        updateStatistics();
      }

      function renderLibrary() {
        const db = Database.getInstance();
        const progress = ProgressService.getInstance();
        const books = db.getAllBooks();
        const grid = document.getElementById("booksGrid");

        if (books.length === 0) {
          grid.innerHTML =
            '<p style="text-align: center; color: #999;">–ö–Ω–∏–≥ —â–µ –Ω–µ–º–∞—î. –î–æ–¥–∞–π—Ç–µ –ø–µ—Ä—à—É!</p>';
          return;
        }

        grid.innerHTML = books
          .map((book) => {
            const prog = progress.getProgress(book.id);
            return `
                    <div class="book-card">
                        <h3>${book.title}</h3>
                        <p><strong>–ê–≤—Ç–æ—Ä:</strong> ${book.author}</p>
                        <p><strong>–í–∏–¥–∞–≤–Ω–∏—Ü—Ç–≤–æ:</strong> ${book.publisher}</p>
                        <p style="font-size: 14px; color: #999;">${
                          book.description
                        }</p>
                        <span class="book-type ${book.type}">${
              book.type === "audiobook" ? "üéß –ê—É–¥—ñ–æ–∫–Ω–∏–≥–∞" : "üìÑ –°–∫–∞–Ω–æ–≤–∞–Ω–∞"
            }</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${prog}%">${prog}%</div>
                        </div>
                        <button class="btn btn-primary" style="margin-top: 10px; width: 100%;" 
                                onclick="updateBookProgress('${
                                  book.id
                                }')">–û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å</button>
                    </div>
                `;
          })
          .join("");
      }

      function updateBookProgress(bookId) {
        const newProgress = Math.floor(Math.random() * 100);
        const progress = ProgressService.getInstance();
        progress.updateProgress(bookId, newProgress);
        renderLibrary();
        updateStatistics();
      }

      function updateStatistics() {
        const db = Database.getInstance();
        const progress = ProgressService.getInstance();
        const books = db.getAllBooks();

        document.getElementById("totalBooks").textContent = books.length;
        document.getElementById("avgProgress").textContent =
          progress.getAverageProgress() + "%";

        const audioCount = books.filter((b) => b.type === "audiobook").length;
        const scannedCount = books.filter((b) => b.type === "scanned").length;

        document.getElementById("audiobookCount").textContent = audioCount;
        document.getElementById("scannedCount").textContent = scannedCount;
      }

      // –î–æ–¥–∞–º–æ –ø—Ä–∏–∫–ª–∞–¥–∏ –∫–Ω–∏–≥ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
      window.addEventListener("load", () => {
        auth.log("üöÄ –°–∏—Å—Ç–µ–º–∞ RemindMe –∑–∞–ø—É—â–µ–Ω–∞");
        auth.log("üìñ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ—Ä–æ–¥–∂—É–≤–∞–ª—å–Ω–∏—Ö –ø–∞—Ç–µ—Ä–Ω—ñ–≤:");
        auth.log("   ‚Ä¢ Factory Method - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –∫–Ω–∏–≥");
        auth.log("   ‚Ä¢ Builder - –ø–æ–∫—Ä–æ–∫–æ–≤–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±'—î–∫—Ç—ñ–≤ Book");
        auth.log("   ‚Ä¢ Singleton - Database, ProgressService, Authorization");
      });
    </script>
  </body>
</html>
